[tools]
go = "latest"
node = "20"
goreleaser = "latest"

[tasks.build]
run = "go build -o ./codex-proxy ./cmd/codex-proxy"
description = "Build the codex-proxy binary"

[tasks.test]
run = "go test ./..."
description = "Run Go tests"

[tasks.release]
run = "mise run goreleaser_release"
description = "Alias for goreleaser_release"

[tasks.goreleaser_snapshot]
description = "Build CLI artifacts via GoReleaser (snapshot)"
run = "goreleaser release --snapshot --clean --config .goreleaser.yml"

[tasks.goreleaser_release]
description = "Publish GitHub Release via GoReleaser"
run = "goreleaser release --clean --config .goreleaser.yml"

[tasks.publish]
run = "cd npm/ && npm publish"
description = "Publish the npm wrapper package in npm/"

[tasks.npm_publish]
run = "mise run publish"
description = "Alias for publish (kept for backwards compatibility)"
